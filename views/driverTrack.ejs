<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0" />
    <title>
        <%= title %>
    </title>
    <link rel='stylesheet' href='/css/style.css' />
    <script src="/js/jquery.js"></script>
    <script src="/js/moment.min.js"></script>
</head>

<body>
    <!-- <div class="container">
        <%- data %>
    </div> -->

    <!-- App Capsule -->
    <div id="appCapsule">
        <div id="request">
        </div>
    </div>
    <!-- * App Capsule -->

    <script src="/js/socket.io.js"></script>
    <script>
        $(function () {
            let obj = {
                userId: '<%- userId %>',
                socketUrl: '<%- socketUrl %>'
            };
            const socket = io(obj.socketUrl);
            //console.log("socket", socket);
            const $container = $('#appCapsule');
            const $request = $('#request');

            socket.on('order_driver_console', (data) => {
                console.log('order_driver_console');
                $request.append(`<p class="text-center"><code>${JSON.stringify(data)}</code></p>`);
            });

            socket.on('connect', function () {
                socket.emit('join', obj, (ack) => {
                    console.log(ack.userId + ' Joined!');
                });
            });
        });
    </script>
</body>

</html>